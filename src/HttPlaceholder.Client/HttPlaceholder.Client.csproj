<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFramework>netstandard2.0</TargetFramework>
    <Version>2019.8.24.1234</Version>
    <AssemblyVersion>2019.8.24.1234</AssemblyVersion>
    <FileVersion>2019.8.24.1234</FileVersion>
    <Authors>Duco Winterwerp</Authors>
    <Company>Duco Winterwerp</Company>
    <Description>A library to communicate with the HttPlaceholder REST API.</Description>
    <PackageTags>httplaceholder stub</PackageTags>
    <PackageProjectUrl>https://github.com/dukeofharen/httplaceholder</PackageProjectUrl>
    <RepositoryUrl>https://github.com/dukeofharen/httplaceholder</RepositoryUrl>
    <Configurations>Debug;Release;Tool</Configurations>
  </PropertyGroup>
  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|AnyCPU'">
    <TreatWarningsAsErrors>false</TreatWarningsAsErrors>
    <WarningsAsErrors />
    <DocumentationFile />
  </PropertyGroup>
  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|AnyCPU'">
    <TreatWarningsAsErrors>true</TreatWarningsAsErrors>
    <WarningsAsErrors />
    <DocumentationFile />
  </PropertyGroup>
  <ItemGroup>
    <PackageReference Include="Microsoft.Extensions.DependencyInjection.Abstractions" Version="3.1.5" />
    <PackageReference Include="Microsoft.Extensions.Http" Version="3.1.5" />
    <PackageReference Include="Newtonsoft.Json" Version="12.0.3" />
    <PackageReference Include="NSwag.MSBuild" Version="13.6.2">
      <PrivateAssets>all</PrivateAssets>
      <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
    </PackageReference>
  </ItemGroup>
  <Target Name="CreateSwaggerJson" BeforeTargets="Build" Condition="'$(Configuration)|$(Platform)'=='Release|AnyCPU'">
    <!-- Generate the actual Swagger JSON file.  -->
    <Exec Command="dotnet run --configuration $(Configuration) --project ../HttPlaceholder.SwaggerGenerator/HttPlaceholder.SwaggerGenerator.csproj" />
    <!-- Create a client based on this file using NSwag. -->
    <Copy SourceFiles="@(ReferencePath)" DestinationFolder="$(OutDir)References" />
    <Exec Command="$(NSwagExe_Core22) run client.nswag /variables:Configuration=$(Configuration),OutDir=$(OutDir)\..\..\..,ProjectRoot=$(MSBuildThisFileDirectory)\..\.." />
    <RemoveDir Directories="$(OutDir)References" />
  </Target>
</Project>